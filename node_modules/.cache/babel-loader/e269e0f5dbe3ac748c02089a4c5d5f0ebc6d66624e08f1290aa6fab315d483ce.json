{"ast":null,"code":"import{useState,useEffect,useRef}from'react';import files from'./files';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const display=(text,output,setOutput,setReadyForInput)=>{if(text.length>0){if(text.startsWith('<')){const tagClosingIndex=text.indexOf('>');setOutput(output+text.slice(0,tagClosingIndex));setTimeout(()=>{display(text.slice(tagClosingIndex),output+text.slice(0,tagClosingIndex),setOutput,setReadyForInput);},28);}else{setOutput(output+text[0]);setTimeout(()=>{display(text.slice(1),output+text[0],setOutput,setReadyForInput);},28);}}else{setReadyForInput(true);}};const Terminal=_ref=>{let{inputRef}=_ref;const[currentUser,setCurrentUser]=useState('guest');const promptText=\"\".concat(currentUser,\"@darigo.su:~ $ \");const init=\"\\n  Welcome to <a target=\\\"_blank\\\" href=\\\"https://github.com/darighost\\\">D-WOS \\u24B6</a  > (Dari's Web OS)<br />\\n  Enter <b   >help</b  > to see available commands<p  />\\n  \";const helpMessage=\"\\n  whoami - basic info about me.<br />\\n  ls - list files<br />\\n  cat - read files. For example, cat .somefile.txt\\n  \";//todo: if they do cat somefile.txt, they get the secret to access the real hackme\nconst whoAmIMessage=\"\\n    Darigo.<p  />\\n    Sabreur, <a target=\\\"_blank\\\" href=\\\"https://git.lain.church/darighost\\\">rogue dev</a  >, quirked up white boi.<p  />\\n  \";const[output,setOutput]=useState(\"\");const[readyForInput,setReadyForInput]=useState(false);const[prompt,setPrompt]=useState(promptText);useEffect(()=>{display(init,output,setOutput,setReadyForInput);},[]);useEffect(()=>{terminalEndRef.current.scrollIntoView({block:'end'});},[output]);const terminalEndRef=useRef(null);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{ref:terminalEndRef,id:\"terminal\",dangerouslySetInnerHTML:{__html:\"<div>\".concat(output,\"</div>\")}}),readyForInput?/*#__PURE__*/_jsx(\"form\",{spellCheck:\"false\",onSubmit:e=>{setPrompt(promptText);setReadyForInput(false);const[_prompt,_dollarSign,command,argument]=prompt.split(/\\s+/);switch(command){case'help':display(helpMessage,output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);break;case'ps':display(\"Here I should display other services running on the server (HNchan, and others)\",output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);break;case'ls':display(Object.keys(files).filter(e=>!e.startsWith('.')).map(e=>\"\".concat(files[e].permissions,\" \").concat(e)).join('<br />'),output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);break;case'whoami':display(whoAmIMessage,output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);break;case'cat':if(Object.keys(files).includes(argument)){if(argument==='HACKME'){if(prompt.startsWith('darigo')){display(files[argument].contents,output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);}else{display('Permission denied.',output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);}}else{display(files[argument].contents,output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);}}else{display('The file you entered does not exist',output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);}break;case'su':setCurrentUser('darigo');setPrompt('darigo@darigo.su:~ $ ');display('<p  />',output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);break;default:display('Unknown command.',output+'<p />'+prompt+'<p />',setOutput,setReadyForInput);}e.preventDefault();return false;},children:/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",autoFocus:true,ref:inputRef,onChange:e=>{if(e.key==='Enter'){alert('omg');}else if(e.target.value.length>=promptText.length)setPrompt(e.target.value);},id:\"prompt\",value:prompt,type:\"text\"})}):\"\"]});};export default Terminal;","map":{"version":3,"names":["useState","useEffect","useRef","files","jsx","_jsx","jsxs","_jsxs","display","text","output","setOutput","setReadyForInput","length","startsWith","tagClosingIndex","indexOf","slice","setTimeout","Terminal","_ref","inputRef","currentUser","setCurrentUser","promptText","concat","init","helpMessage","whoAmIMessage","readyForInput","prompt","setPrompt","terminalEndRef","current","scrollIntoView","block","children","ref","id","dangerouslySetInnerHTML","__html","spellCheck","onSubmit","e","_prompt","_dollarSign","command","argument","split","Object","keys","filter","map","permissions","join","includes","contents","preventDefault","autoComplete","autoFocus","onChange","key","alert","target","value","type"],"sources":["/Users/eliana/Documents/Code/darighost.github.io/src/Terminal.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport files from './files';\n\nconst display = (text, output, setOutput, setReadyForInput) => {\n\n  if (text.length > 0) {\n    if (text.startsWith('<')) {\n      const tagClosingIndex = text.indexOf('>');\n      setOutput(output + text.slice(0, tagClosingIndex))\n      setTimeout(() => {\n        display(\n          text.slice(tagClosingIndex),\n          output+text.slice(0, tagClosingIndex),\n          setOutput,\n          setReadyForInput\n        );\n      }, 28)\n    } else {\n      setOutput(output+text[0]);\n      setTimeout(()=>{\n        display(text.slice(1), output+text[0], setOutput, setReadyForInput)\n      }, 28)\n    }\n  } else {\n    setReadyForInput(true);\n  }\n}\n\nconst Terminal = ({inputRef}) => {\n  const [currentUser, setCurrentUser] = useState('guest')\n  const promptText = `${currentUser}@darigo.su:~ $ `;\n  const init = `\n  Welcome to <a target=\"_blank\" href=\"https://github.com/darighost\">D-WOS â’¶</a  > (Dari's Web OS)<br />\n  Enter <b   >help</b  > to see available commands<p  />\n  `;\n  const helpMessage = `\n  whoami - basic info about me.<br />\n  ls - list files<br />\n  cat - read files. For example, cat .somefile.txt\n  `; //todo: if they do cat somefile.txt, they get the secret to access the real hackme\n  const whoAmIMessage = `\n    Darigo.<p  />\n    Sabreur, <a target=\"_blank\" href=\"https://git.lain.church/darighost\">rogue dev</a  >, quirked up white boi.<p  />\n  `;\n  const [output, setOutput] = useState(\"\")\n  const [readyForInput, setReadyForInput] = useState(false);\n  const [prompt, setPrompt] = useState(promptText);\n\n  useEffect(() => {\n    display(init, output, setOutput, setReadyForInput)\n  }, [])\n\n\n  useEffect(() => {\n    terminalEndRef.current.scrollIntoView({block: 'end'})\n  }, [output])\n\n  const terminalEndRef = useRef(null);\n\n  return (\n    <div>\n      <div ref={terminalEndRef} id=\"terminal\" dangerouslySetInnerHTML={{__html: `<div>${output}</div>`}}></div>\n      {(readyForInput) ? (<form spellCheck=\"false\" onSubmit={e=>{\n        setPrompt(promptText);\n        setReadyForInput(false);\n\n        const [_prompt, _dollarSign, command, argument] = prompt.split(/\\s+/)\n\n        switch (command) {\n          case 'help':\n            display(helpMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ps':\n            display(\"Here I should display other services running on the server (HNchan, and others)\", output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ls':\n            display(Object.keys(files).filter(e=>!e.startsWith('.')).map(e=>`${files[e].permissions} ${e}`).join('<br />'), output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'whoami':\n            display(whoAmIMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'cat':\n            if (Object.keys(files).includes(argument)) {\n              if (argument === 'HACKME') {\n                if (prompt.startsWith('darigo')) {\n                  display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                } else {\n                  display('Permission denied.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                }\n              } else {\n                display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n              }\n            } else {\n              display('The file you entered does not exist', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            }\n            break;\n          case 'su':\n            setCurrentUser('darigo');\n            setPrompt('darigo@darigo.su:~ $ ')\n            display('<p  />', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          default:\n            display('Unknown command.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n        }\n\n        e.preventDefault();\n        return false;\n      }}><input autoComplete=\"off\" autoFocus ref={inputRef} onChange={e=>{\n        if (e.key === 'Enter') {\n          alert('omg')\n        }\n        else if (e.target.value.length >= promptText.length) setPrompt(e.target.value)\n      }} id=\"prompt\" value={prompt} type=\"text\" /></form>) : \"\"}\n    </div>\n  )\n}\n\nexport default Terminal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}