{"ast":null,"code":"var _jsxFileName = \"/Users/danielbednarski/darighost.github.io/src/Terminal.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport files from './files';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst display = (text, output, setOutput, setReadyForInput) => {\n  if (text.length > 0) {\n    if (text.startsWith('<')) {\n      const tagClosingIndex = text.indexOf('>');\n      setOutput(output + text.slice(0, tagClosingIndex));\n      setTimeout(() => {\n        display(text.slice(tagClosingIndex), output + text.slice(0, tagClosingIndex), setOutput, setReadyForInput);\n      }, 28);\n    } else {\n      setOutput(output + text[0]);\n      setTimeout(() => {\n        display(text.slice(1), output + text[0], setOutput, setReadyForInput);\n      }, 28);\n    }\n  } else {\n    setReadyForInput(true);\n  }\n};\nconst Terminal = ({\n  inputRef\n}) => {\n  _s();\n  const [currentUser, setCurrentUser] = useState('guest');\n  const promptText = `${currentUser}@dan.su:~ $ `;\n  const init = `\n  Welcome to <a target=\"_blank\" href=\"https://github.com/dan\">D-WOS Ⓐ</a  > (Dani's Web OS)<br />\n  Enter <b   >help</b  > to see available commands<p  />\n  `;\n  const helpMessage = `\n  who - basic info about me.<br />\n  ls &nbsp;- list files<br />\n  cat &nbsp;- read files. Eg, cat .somefile.txt<br />\n  su  &nbsp;- switch users. Eg, su dan\n  `; //todo: if they do cat somefile.txt, they get the secret to access the real hackme\n  const whoAmIMessage = `\n    Dani.<p  />\n    Sabreur, <a target=\"_blank\" href=\"https://git.lain.church/darighost\">rogue dev</a  >, quirked up white boi.<p  />\n  `;\n  const [output, setOutput] = useState(\"\");\n  const [readyForInput, setReadyForInput] = useState(false);\n  const [prompt, setPrompt] = useState(promptText);\n  useEffect(() => {\n    display(init, output, setOutput, setReadyForInput);\n  }, []);\n  useEffect(() => {\n    terminalEndRef.current.scrollIntoView({\n      block: 'end'\n    });\n  }, [output]);\n  const terminalEndRef = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: terminalEndRef,\n      id: \"terminal\",\n      dangerouslySetInnerHTML: {\n        __html: `<div>${output}</div>`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), readyForInput ? /*#__PURE__*/_jsxDEV(\"form\", {\n      spellCheck: \"false\",\n      onSubmit: e => {\n        setPrompt(promptText);\n        setReadyForInput(false);\n        const [_prompt, _dollarSign, command, argument] = prompt.split(/\\s+/);\n        switch (command) {\n          case 'help':\n            display(helpMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ps':\n            display(\"Here I should display other services running on the server (HNchan, and others)\", output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ls':\n            display(Object.keys(files).filter(e => !e.startsWith('.')).map(e => `${files[e].permissions} ${e}`).join('<br />'), output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'whoami':\n            display(whoAmIMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'cat':\n            if (Object.keys(files).includes(argument)) {\n              if (argument === 'HACKME') {\n                if (prompt.startsWith('dan')) {\n                  display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                } else {\n                  display('Permission denied.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                }\n              } else {\n                display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n              }\n            } else {\n              display('The file you entered does not exist', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            }\n            break;\n          case 'su':\n            setCurrentUser('dan');\n            setPrompt('dan@dan.su:~ $ ');\n            display('<p  />', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          default:\n            display('Unknown command.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n        }\n        e.preventDefault();\n        return false;\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        autoComplete: \"off\",\n        autoFocus: true,\n        ref: inputRef,\n        onChange: e => {\n          if (e.key === 'Enter') {\n            alert('omg');\n          } else if (e.target.value.length >= promptText.length) setPrompt(e.target.value);\n        },\n        id: \"prompt\",\n        value: prompt,\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 27\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(Terminal, \"2PZsHSVQRV5Ddo+ocFWrX5nmZJY=\");\n_c = Terminal;\nexport default Terminal;\nvar _c;\n$RefreshReg$(_c, \"Terminal\");","map":{"version":3,"names":["useState","useEffect","useRef","files","jsxDEV","_jsxDEV","display","text","output","setOutput","setReadyForInput","length","startsWith","tagClosingIndex","indexOf","slice","setTimeout","Terminal","inputRef","_s","currentUser","setCurrentUser","promptText","init","helpMessage","whoAmIMessage","readyForInput","prompt","setPrompt","terminalEndRef","current","scrollIntoView","block","children","ref","id","dangerouslySetInnerHTML","__html","fileName","_jsxFileName","lineNumber","columnNumber","spellCheck","onSubmit","e","_prompt","_dollarSign","command","argument","split","Object","keys","filter","map","permissions","join","includes","contents","preventDefault","autoComplete","autoFocus","onChange","key","alert","target","value","type","_c","$RefreshReg$"],"sources":["/Users/danielbednarski/darighost.github.io/src/Terminal.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport files from './files';\n\nconst display = (text, output, setOutput, setReadyForInput) => {\n\n  if (text.length > 0) {\n    if (text.startsWith('<')) {\n      const tagClosingIndex = text.indexOf('>');\n      setOutput(output + text.slice(0, tagClosingIndex))\n      setTimeout(() => {\n        display(\n          text.slice(tagClosingIndex),\n          output+text.slice(0, tagClosingIndex),\n          setOutput,\n          setReadyForInput\n        );\n      }, 28)\n    } else {\n      setOutput(output+text[0]);\n      setTimeout(()=>{\n        display(text.slice(1), output+text[0], setOutput, setReadyForInput)\n      }, 28)\n    }\n  } else {\n    setReadyForInput(true);\n  }\n}\n\nconst Terminal = ({inputRef}) => {\n  const [currentUser, setCurrentUser] = useState('guest')\n  const promptText = `${currentUser}@dan.su:~ $ `;\n  const init = `\n  Welcome to <a target=\"_blank\" href=\"https://github.com/dan\">D-WOS Ⓐ</a  > (Dani's Web OS)<br />\n  Enter <b   >help</b  > to see available commands<p  />\n  `;\n  const helpMessage = `\n  who - basic info about me.<br />\n  ls &nbsp;- list files<br />\n  cat &nbsp;- read files. Eg, cat .somefile.txt<br />\n  su  &nbsp;- switch users. Eg, su dan\n  `; //todo: if they do cat somefile.txt, they get the secret to access the real hackme\n  const whoAmIMessage = `\n    Dani.<p  />\n    Sabreur, <a target=\"_blank\" href=\"https://git.lain.church/darighost\">rogue dev</a  >, quirked up white boi.<p  />\n  `;\n  const [output, setOutput] = useState(\"\")\n  const [readyForInput, setReadyForInput] = useState(false);\n  const [prompt, setPrompt] = useState(promptText);\n\n  useEffect(() => {\n    display(init, output, setOutput, setReadyForInput)\n  }, [])\n\n\n  useEffect(() => {\n    terminalEndRef.current.scrollIntoView({block: 'end'})\n  }, [output])\n\n  const terminalEndRef = useRef(null);\n\n  return (\n    <div>\n      <div ref={terminalEndRef} id=\"terminal\" dangerouslySetInnerHTML={{__html: `<div>${output}</div>`}}></div>\n      {(readyForInput) ? (<form spellCheck=\"false\" onSubmit={e=>{\n        setPrompt(promptText);\n        setReadyForInput(false);\n\n        const [_prompt, _dollarSign, command, argument] = prompt.split(/\\s+/)\n\n        switch (command) {\n          case 'help':\n            display(helpMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ps':\n            display(\"Here I should display other services running on the server (HNchan, and others)\", output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'ls':\n            display(Object.keys(files).filter(e=>!e.startsWith('.')).map(e=>`${files[e].permissions} ${e}`).join('<br />'), output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'whoami':\n            display(whoAmIMessage, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          case 'cat':\n            if (Object.keys(files).includes(argument)) {\n              if (argument === 'HACKME') {\n                if (prompt.startsWith('dan')) {\n                  display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                } else {\n                  display('Permission denied.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n                }\n              } else {\n                display(files[argument].contents, output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n              }\n            } else {\n              display('The file you entered does not exist', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            }\n            break;\n          case 'su':\n            setCurrentUser('dan');\n            setPrompt('dan@dan.su:~ $ ')\n            display('<p  />', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n            break;\n          default:\n            display('Unknown command.', output + '<p />' + prompt + '<p />', setOutput, setReadyForInput);\n        }\n\n        e.preventDefault();\n        return false;\n      }}><input autoComplete=\"off\" autoFocus ref={inputRef} onChange={e=>{\n        if (e.key === 'Enter') {\n          alert('omg')\n        }\n        else if (e.target.value.length >= promptText.length) setPrompt(e.target.value)\n      }} id=\"prompt\" value={prompt} type=\"text\" /></form>) : \"\"}\n    </div>\n  )\n}\n\nexport default Terminal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}