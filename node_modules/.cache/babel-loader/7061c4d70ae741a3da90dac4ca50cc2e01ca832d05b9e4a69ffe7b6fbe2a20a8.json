{"ast":null,"code":"import { useRef, useMemo, useState, useCallback, useEffect } from 'react';\nimport { KEYBOARD_KEY_CODES } from '../common/constants.mjs';\nimport useControlledOrUncontrolled from '../common/hooks/useControlledOrUncontrolled.mjs';\nimport { clamp } from '../common/utils/index.mjs';\nconst TYPING_RESET_DELAY = 1e3;\nconst useSelectState = ({\n  onBlur,\n  onChange,\n  onClose,\n  onFocus,\n  onKeyDown,\n  onMouseDown,\n  onOpen,\n  open: openProp,\n  options,\n  readOnly,\n  value,\n  selectRef,\n  setValue,\n  wrapperRef\n}) => {\n  const dropdownRef = useRef(null);\n  const optionRefs = useRef([]);\n  const selectedIndex = useRef(0);\n  const activeIndex = useRef(0);\n  const focusIndexWhenSet = useRef();\n  const typingMode = useRef(\"search\");\n  const typedString = useRef(\"\");\n  const typingTimer = useRef();\n  const [open, setOpen] = useControlledOrUncontrolled({\n    defaultValue: false,\n    onChange: onOpen,\n    onChangePropName: \"onOpen\",\n    readOnly,\n    value: openProp,\n    valuePropName: \"open\"\n  });\n  const selectedOption = useMemo(() => {\n    const index = options.findIndex(option => option.value === value);\n    selectedIndex.current = clamp(index, 0, null);\n    return options[index];\n  }, [options, value]);\n  const [activeOption, setActiveOption] = useState(options[0]);\n  const focusOption = useCallback(index => {\n    const dropdownEl = dropdownRef.current;\n    const optionEl = optionRefs.current[index];\n    if (!optionEl || !dropdownEl) {\n      focusIndexWhenSet.current = index;\n      return;\n    }\n    focusIndexWhenSet.current = void 0;\n    const dropdownHeight = dropdownEl.clientHeight;\n    const dropdownScrollTop = dropdownEl.scrollTop;\n    const dropdownScrollEnd = dropdownEl.scrollTop + dropdownHeight;\n    const optionTop = optionEl.offsetTop;\n    const optionHeight = optionEl.offsetHeight;\n    const optionBottom = optionEl.offsetTop + optionEl.offsetHeight;\n    if (optionTop < dropdownScrollTop) {\n      dropdownEl.scrollTo(0, optionTop);\n    }\n    if (optionBottom > dropdownScrollEnd) {\n      dropdownEl.scrollTo(0, optionTop - dropdownHeight + optionHeight);\n    }\n    optionEl.focus({\n      preventScroll: true\n    });\n  }, [dropdownRef]);\n  const activateOption = useCallback((indexOrOption, {\n    scroll\n  } = {}) => {\n    var _a;\n    const lastIndex = options.length - 1;\n    let index;\n    switch (indexOrOption) {\n      case \"first\":\n        {\n          index = 0;\n          break;\n        }\n      case \"last\":\n        {\n          index = lastIndex;\n          break;\n        }\n      case \"next\":\n        {\n          index = clamp(activeIndex.current + 1, 0, lastIndex);\n          break;\n        }\n      case \"previous\":\n        {\n          index = clamp(activeIndex.current - 1, 0, lastIndex);\n          break;\n        }\n      case \"selected\":\n        {\n          index = clamp((_a = selectedIndex.current) !== null && _a !== void 0 ? _a : 0, 0, lastIndex);\n          break;\n        }\n      default:\n        index = indexOrOption;\n    }\n    activeIndex.current = index;\n    setActiveOption(options[index]);\n    if (scroll) {\n      focusOption(index);\n    }\n  }, [activeIndex, options, focusOption]);\n  const openDropdown = useCallback(({\n    fromEvent\n  }) => {\n    setOpen(true);\n    activateOption(\"selected\", {\n      scroll: true\n    });\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen({\n      fromEvent\n    });\n  }, [activateOption, onOpen, setOpen]);\n  const clearSearchFromTyping = useCallback(() => {\n    typingMode.current = \"search\";\n    typedString.current = \"\";\n    clearTimeout(typingTimer.current);\n  }, []);\n  const closeDropdown = useCallback(({\n    focusSelect,\n    fromEvent\n  }) => {\n    var _a;\n    onClose === null || onClose === void 0 ? void 0 : onClose({\n      fromEvent\n    });\n    setOpen(false);\n    setActiveOption(options[0]);\n    clearSearchFromTyping();\n    focusIndexWhenSet.current = void 0;\n    if (focusSelect) {\n      (_a = selectRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }, [clearSearchFromTyping, onClose, options, selectRef, setOpen]);\n  const toggleDropdown = useCallback(({\n    fromEvent\n  }) => {\n    if (open) {\n      closeDropdown({\n        focusSelect: false,\n        fromEvent\n      });\n    } else {\n      openDropdown({\n        fromEvent\n      });\n    }\n  }, [closeDropdown, openDropdown, open]);\n  const selectOptionIndex = useCallback((optionIndex, {\n    fromEvent\n  }) => {\n    if (selectedIndex.current === optionIndex) {\n      return;\n    }\n    selectedIndex.current = optionIndex;\n    setValue(options[optionIndex].value);\n    onChange === null || onChange === void 0 ? void 0 : onChange(options[optionIndex], {\n      fromEvent\n    });\n  }, [onChange, options, setValue]);\n  const selectActiveOptionAndClose = useCallback(({\n    focusSelect,\n    fromEvent\n  }) => {\n    selectOptionIndex(activeIndex.current, {\n      fromEvent\n    });\n    closeDropdown({\n      focusSelect,\n      fromEvent\n    });\n  }, [closeDropdown, selectOptionIndex]);\n  const searchFromTyping = useCallback((letter, {\n    fromEvent,\n    select\n  }) => {\n    var _a;\n    if (typingMode.current === \"cycleFirstLetter\" && letter !== typedString.current) {\n      typingMode.current = \"search\";\n    }\n    if (letter === typedString.current) {\n      typingMode.current = \"cycleFirstLetter\";\n    } else {\n      typedString.current += letter;\n    }\n    switch (typingMode.current) {\n      case \"search\":\n        {\n          let foundOptionIndex = options.findIndex(option => {\n            var _a2;\n            return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(typedString.current)) === 0;\n          });\n          if (foundOptionIndex < 0) {\n            foundOptionIndex = options.findIndex(option => {\n              var _a2;\n              return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n            });\n            typedString.current = letter;\n          }\n          if (foundOptionIndex >= 0) {\n            if (select) {\n              selectOptionIndex(foundOptionIndex, {\n                fromEvent\n              });\n            } else {\n              activateOption(foundOptionIndex, {\n                scroll: true\n              });\n            }\n          }\n          break;\n        }\n      case \"cycleFirstLetter\":\n        {\n          const currentOptionIndex = select ? (_a = selectedIndex.current) !== null && _a !== void 0 ? _a : -1 : activeIndex.current;\n          let foundOptionIndex = options.findIndex((option, index) => {\n            var _a2;\n            return index > currentOptionIndex && ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n          });\n          if (foundOptionIndex < 0) {\n            foundOptionIndex = options.findIndex(option => {\n              var _a2;\n              return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n            });\n          }\n          if (foundOptionIndex >= 0) {\n            if (select) {\n              selectOptionIndex(foundOptionIndex, {\n                fromEvent\n              });\n            } else {\n              activateOption(foundOptionIndex, {\n                scroll: true\n              });\n            }\n          }\n          break;\n        }\n    }\n    clearTimeout(typingTimer.current);\n    typingTimer.current = setTimeout(() => {\n      if (typingMode.current === \"search\") {\n        typedString.current = \"\";\n      }\n    }, TYPING_RESET_DELAY);\n  }, [activateOption, options, selectOptionIndex]);\n  const handleMouseDown = useCallback(event => {\n    var _a;\n    if (event.button !== 0) {\n      return;\n    }\n    event.preventDefault();\n    (_a = selectRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    toggleDropdown({\n      fromEvent: event\n    });\n    onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(event);\n  }, [onMouseDown, selectRef, toggleDropdown]);\n  const handleOptionClick = useCallback(event => {\n    selectActiveOptionAndClose({\n      focusSelect: true,\n      fromEvent: event\n    });\n  }, [selectActiveOptionAndClose]);\n  const handleKeyDown = useCallback(event => {\n    const {\n      altKey,\n      code,\n      ctrlKey,\n      metaKey,\n      shiftKey\n    } = event;\n    const {\n      ARROW_DOWN,\n      ARROW_UP,\n      END,\n      ENTER,\n      ESC,\n      HOME,\n      SPACE,\n      TAB\n    } = KEYBOARD_KEY_CODES;\n    const modifierKey = altKey || ctrlKey || metaKey || shiftKey;\n    const modifierKeyButShift = altKey || ctrlKey || metaKey;\n    if (code === TAB && modifierKeyButShift || code !== TAB && modifierKey) {\n      return;\n    }\n    switch (code) {\n      case ARROW_DOWN:\n        {\n          event.preventDefault();\n          if (!open) {\n            openDropdown({\n              fromEvent: event\n            });\n            return;\n          }\n          activateOption(\"next\", {\n            scroll: true\n          });\n          break;\n        }\n      case ARROW_UP:\n        {\n          event.preventDefault();\n          if (!open) {\n            openDropdown({\n              fromEvent: event\n            });\n            return;\n          }\n          activateOption(\"previous\", {\n            scroll: true\n          });\n          break;\n        }\n      case END:\n        {\n          event.preventDefault();\n          if (!open) {\n            openDropdown({\n              fromEvent: event\n            });\n            return;\n          }\n          activateOption(\"last\", {\n            scroll: true\n          });\n          break;\n        }\n      case ENTER:\n        {\n          if (!open) {\n            return;\n          }\n          event.preventDefault();\n          selectActiveOptionAndClose({\n            focusSelect: true,\n            fromEvent: event\n          });\n          break;\n        }\n      case ESC:\n        {\n          if (!open) {\n            return;\n          }\n          event.preventDefault();\n          closeDropdown({\n            focusSelect: true,\n            fromEvent: event\n          });\n          break;\n        }\n      case HOME:\n        {\n          event.preventDefault();\n          if (!open) {\n            openDropdown({\n              fromEvent: event\n            });\n            return;\n          }\n          activateOption(\"first\", {\n            scroll: true\n          });\n          break;\n        }\n      case SPACE:\n        {\n          event.preventDefault();\n          if (open) {\n            selectActiveOptionAndClose({\n              focusSelect: true,\n              fromEvent: event\n            });\n          } else {\n            openDropdown({\n              fromEvent: event\n            });\n          }\n          break;\n        }\n      case TAB:\n        {\n          if (!open) {\n            return;\n          }\n          if (!shiftKey) {\n            event.preventDefault();\n          }\n          selectActiveOptionAndClose({\n            focusSelect: !shiftKey,\n            fromEvent: event\n          });\n          break;\n        }\n      default:\n        if (!modifierKey && code.match(/^Key/)) {\n          event.preventDefault();\n          event.stopPropagation();\n          searchFromTyping(code.replace(/^Key/, \"\"), {\n            select: !open,\n            fromEvent: event\n          });\n        }\n    }\n  }, [activateOption, closeDropdown, open, openDropdown, searchFromTyping, selectActiveOptionAndClose]);\n  const handleButtonKeyDown = useCallback(event => {\n    handleKeyDown(event);\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleKeyDown, onKeyDown]);\n  const handleActivateOptionIndex = useCallback(index => {\n    activateOption(index);\n  }, [activateOption]);\n  const handleBlur = useCallback(event => {\n    if (open) {\n      return;\n    }\n    clearSearchFromTyping();\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n  }, [clearSearchFromTyping, onBlur, open]);\n  const handleFocus = useCallback(event => {\n    clearSearchFromTyping();\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(event);\n  }, [clearSearchFromTyping, onFocus]);\n  const handleSetDropdownRef = useCallback(ref => {\n    dropdownRef.current = ref;\n    if (focusIndexWhenSet.current !== void 0) {\n      focusOption(focusIndexWhenSet.current);\n    }\n  }, [focusOption]);\n  const handleSetOptionRef = useCallback((optionRef, index) => {\n    optionRefs.current[index] = optionRef;\n    if (focusIndexWhenSet.current === index) {\n      focusOption(focusIndexWhenSet.current);\n    }\n  }, [focusOption]);\n  useEffect(() => {\n    if (!open) {\n      return () => {};\n    }\n    const outsideMouseDown = event => {\n      var _a;\n      const target = event.target;\n      if (!((_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.contains(target))) {\n        event.preventDefault();\n        closeDropdown({\n          focusSelect: false,\n          fromEvent: event\n        });\n      }\n    };\n    document.addEventListener(\"mousedown\", outsideMouseDown);\n    return () => {\n      document.removeEventListener(\"mousedown\", outsideMouseDown);\n    };\n  }, [closeDropdown, open, wrapperRef]);\n  return useMemo(() => ({\n    activeOption,\n    handleActivateOptionIndex,\n    handleBlur,\n    handleButtonKeyDown,\n    handleDropdownKeyDown: handleKeyDown,\n    handleFocus,\n    handleMouseDown,\n    handleOptionClick,\n    handleSetDropdownRef,\n    handleSetOptionRef,\n    open,\n    selectedOption\n  }), [activeOption, handleActivateOptionIndex, handleBlur, handleButtonKeyDown, handleFocus, handleKeyDown, handleMouseDown, handleOptionClick, handleSetDropdownRef, handleSetOptionRef, open, selectedOption]);\n};\nexport { useSelectState };","map":{"version":3,"names":["useRef","useMemo","useState","useCallback","useEffect","KEYBOARD_KEY_CODES","useControlledOrUncontrolled","clamp","TYPING_RESET_DELAY","useSelectState","onBlur","onChange","onClose","onFocus","onKeyDown","onMouseDown","onOpen","open","openProp","options","readOnly","value","selectRef","setValue","wrapperRef","dropdownRef","optionRefs","selectedIndex","activeIndex","focusIndexWhenSet","typingMode","typedString","typingTimer","setOpen","defaultValue","onChangePropName","valuePropName","selectedOption","index","findIndex","option","current","activeOption","setActiveOption","focusOption","dropdownEl","optionEl","dropdownHeight","clientHeight","dropdownScrollTop","scrollTop","dropdownScrollEnd","optionTop","offsetTop","optionHeight","offsetHeight","optionBottom","scrollTo","focus","preventScroll","activateOption","indexOrOption","scroll","_a","lastIndex","length","openDropdown","fromEvent","clearSearchFromTyping","clearTimeout","closeDropdown","focusSelect","toggleDropdown","selectOptionIndex","optionIndex","selectActiveOptionAndClose","searchFromTyping","letter","select","foundOptionIndex","_a2","label","toLocaleUpperCase","indexOf","currentOptionIndex","setTimeout","handleMouseDown","event","button","preventDefault","handleOptionClick","handleKeyDown","altKey","code","ctrlKey","metaKey","shiftKey","ARROW_DOWN","ARROW_UP","END","ENTER","ESC","HOME","SPACE","TAB","modifierKey","modifierKeyButShift","match","stopPropagation","replace","handleButtonKeyDown","handleActivateOptionIndex","handleBlur","handleFocus","handleSetDropdownRef","ref","handleSetOptionRef","optionRef","outsideMouseDown","target","contains","document","addEventListener","removeEventListener","handleDropdownKeyDown"],"sources":["/Users/eliana/Documents/Code/homepage/node_modules/react95/dist/Select/useSelectState.mjs"],"sourcesContent":["import { useRef, useMemo, useState, useCallback, useEffect } from 'react';\nimport { KEYBOARD_KEY_CODES } from '../common/constants.mjs';\nimport useControlledOrUncontrolled from '../common/hooks/useControlledOrUncontrolled.mjs';\nimport { clamp } from '../common/utils/index.mjs';\n\nconst TYPING_RESET_DELAY = 1e3;\nconst useSelectState = ({ onBlur, onChange, onClose, onFocus, onKeyDown, onMouseDown, onOpen, open: openProp, options, readOnly, value, selectRef, setValue, wrapperRef }) => {\n  const dropdownRef = useRef(null);\n  const optionRefs = useRef([]);\n  const selectedIndex = useRef(0);\n  const activeIndex = useRef(0);\n  const focusIndexWhenSet = useRef();\n  const typingMode = useRef(\"search\");\n  const typedString = useRef(\"\");\n  const typingTimer = useRef();\n  const [open, setOpen] = useControlledOrUncontrolled({\n    defaultValue: false,\n    onChange: onOpen,\n    onChangePropName: \"onOpen\",\n    readOnly,\n    value: openProp,\n    valuePropName: \"open\"\n  });\n  const selectedOption = useMemo(() => {\n    const index = options.findIndex((option) => option.value === value);\n    selectedIndex.current = clamp(index, 0, null);\n    return options[index];\n  }, [options, value]);\n  const [activeOption, setActiveOption] = useState(options[0]);\n  const focusOption = useCallback((index) => {\n    const dropdownEl = dropdownRef.current;\n    const optionEl = optionRefs.current[index];\n    if (!optionEl || !dropdownEl) {\n      focusIndexWhenSet.current = index;\n      return;\n    }\n    focusIndexWhenSet.current = void 0;\n    const dropdownHeight = dropdownEl.clientHeight;\n    const dropdownScrollTop = dropdownEl.scrollTop;\n    const dropdownScrollEnd = dropdownEl.scrollTop + dropdownHeight;\n    const optionTop = optionEl.offsetTop;\n    const optionHeight = optionEl.offsetHeight;\n    const optionBottom = optionEl.offsetTop + optionEl.offsetHeight;\n    if (optionTop < dropdownScrollTop) {\n      dropdownEl.scrollTo(0, optionTop);\n    }\n    if (optionBottom > dropdownScrollEnd) {\n      dropdownEl.scrollTo(0, optionTop - dropdownHeight + optionHeight);\n    }\n    optionEl.focus({ preventScroll: true });\n  }, [dropdownRef]);\n  const activateOption = useCallback((indexOrOption, { scroll } = {}) => {\n    var _a;\n    const lastIndex = options.length - 1;\n    let index;\n    switch (indexOrOption) {\n      case \"first\": {\n        index = 0;\n        break;\n      }\n      case \"last\": {\n        index = lastIndex;\n        break;\n      }\n      case \"next\": {\n        index = clamp(activeIndex.current + 1, 0, lastIndex);\n        break;\n      }\n      case \"previous\": {\n        index = clamp(activeIndex.current - 1, 0, lastIndex);\n        break;\n      }\n      case \"selected\": {\n        index = clamp((_a = selectedIndex.current) !== null && _a !== void 0 ? _a : 0, 0, lastIndex);\n        break;\n      }\n      default:\n        index = indexOrOption;\n    }\n    activeIndex.current = index;\n    setActiveOption(options[index]);\n    if (scroll) {\n      focusOption(index);\n    }\n  }, [activeIndex, options, focusOption]);\n  const openDropdown = useCallback(({ fromEvent }) => {\n    setOpen(true);\n    activateOption(\"selected\", { scroll: true });\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen({ fromEvent });\n  }, [activateOption, onOpen, setOpen]);\n  const clearSearchFromTyping = useCallback(() => {\n    typingMode.current = \"search\";\n    typedString.current = \"\";\n    clearTimeout(typingTimer.current);\n  }, []);\n  const closeDropdown = useCallback(({ focusSelect, fromEvent }) => {\n    var _a;\n    onClose === null || onClose === void 0 ? void 0 : onClose({ fromEvent });\n    setOpen(false);\n    setActiveOption(options[0]);\n    clearSearchFromTyping();\n    focusIndexWhenSet.current = void 0;\n    if (focusSelect) {\n      (_a = selectRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }, [clearSearchFromTyping, onClose, options, selectRef, setOpen]);\n  const toggleDropdown = useCallback(({ fromEvent }) => {\n    if (open) {\n      closeDropdown({ focusSelect: false, fromEvent });\n    } else {\n      openDropdown({ fromEvent });\n    }\n  }, [closeDropdown, openDropdown, open]);\n  const selectOptionIndex = useCallback((optionIndex, { fromEvent }) => {\n    if (selectedIndex.current === optionIndex) {\n      return;\n    }\n    selectedIndex.current = optionIndex;\n    setValue(options[optionIndex].value);\n    onChange === null || onChange === void 0 ? void 0 : onChange(options[optionIndex], { fromEvent });\n  }, [onChange, options, setValue]);\n  const selectActiveOptionAndClose = useCallback(({ focusSelect, fromEvent }) => {\n    selectOptionIndex(activeIndex.current, { fromEvent });\n    closeDropdown({ focusSelect, fromEvent });\n  }, [closeDropdown, selectOptionIndex]);\n  const searchFromTyping = useCallback((letter, { fromEvent, select }) => {\n    var _a;\n    if (typingMode.current === \"cycleFirstLetter\" && letter !== typedString.current) {\n      typingMode.current = \"search\";\n    }\n    if (letter === typedString.current) {\n      typingMode.current = \"cycleFirstLetter\";\n    } else {\n      typedString.current += letter;\n    }\n    switch (typingMode.current) {\n      case \"search\": {\n        let foundOptionIndex = options.findIndex((option) => {\n          var _a2;\n          return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(typedString.current)) === 0;\n        });\n        if (foundOptionIndex < 0) {\n          foundOptionIndex = options.findIndex((option) => {\n            var _a2;\n            return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n          });\n          typedString.current = letter;\n        }\n        if (foundOptionIndex >= 0) {\n          if (select) {\n            selectOptionIndex(foundOptionIndex, { fromEvent });\n          } else {\n            activateOption(foundOptionIndex, { scroll: true });\n          }\n        }\n        break;\n      }\n      case \"cycleFirstLetter\": {\n        const currentOptionIndex = select ? (_a = selectedIndex.current) !== null && _a !== void 0 ? _a : -1 : activeIndex.current;\n        let foundOptionIndex = options.findIndex((option, index) => {\n          var _a2;\n          return index > currentOptionIndex && ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n        });\n        if (foundOptionIndex < 0) {\n          foundOptionIndex = options.findIndex((option) => {\n            var _a2;\n            return ((_a2 = option.label) === null || _a2 === void 0 ? void 0 : _a2.toLocaleUpperCase().indexOf(letter)) === 0;\n          });\n        }\n        if (foundOptionIndex >= 0) {\n          if (select) {\n            selectOptionIndex(foundOptionIndex, { fromEvent });\n          } else {\n            activateOption(foundOptionIndex, { scroll: true });\n          }\n        }\n        break;\n      }\n    }\n    clearTimeout(typingTimer.current);\n    typingTimer.current = setTimeout(() => {\n      if (typingMode.current === \"search\") {\n        typedString.current = \"\";\n      }\n    }, TYPING_RESET_DELAY);\n  }, [activateOption, options, selectOptionIndex]);\n  const handleMouseDown = useCallback((event) => {\n    var _a;\n    if (event.button !== 0) {\n      return;\n    }\n    event.preventDefault();\n    (_a = selectRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    toggleDropdown({ fromEvent: event });\n    onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(event);\n  }, [onMouseDown, selectRef, toggleDropdown]);\n  const handleOptionClick = useCallback((event) => {\n    selectActiveOptionAndClose({ focusSelect: true, fromEvent: event });\n  }, [selectActiveOptionAndClose]);\n  const handleKeyDown = useCallback((event) => {\n    const { altKey, code, ctrlKey, metaKey, shiftKey } = event;\n    const { ARROW_DOWN, ARROW_UP, END, ENTER, ESC, HOME, SPACE, TAB } = KEYBOARD_KEY_CODES;\n    const modifierKey = altKey || ctrlKey || metaKey || shiftKey;\n    const modifierKeyButShift = altKey || ctrlKey || metaKey;\n    if (code === TAB && modifierKeyButShift || code !== TAB && modifierKey) {\n      return;\n    }\n    switch (code) {\n      case ARROW_DOWN: {\n        event.preventDefault();\n        if (!open) {\n          openDropdown({ fromEvent: event });\n          return;\n        }\n        activateOption(\"next\", { scroll: true });\n        break;\n      }\n      case ARROW_UP: {\n        event.preventDefault();\n        if (!open) {\n          openDropdown({ fromEvent: event });\n          return;\n        }\n        activateOption(\"previous\", { scroll: true });\n        break;\n      }\n      case END: {\n        event.preventDefault();\n        if (!open) {\n          openDropdown({ fromEvent: event });\n          return;\n        }\n        activateOption(\"last\", { scroll: true });\n        break;\n      }\n      case ENTER: {\n        if (!open) {\n          return;\n        }\n        event.preventDefault();\n        selectActiveOptionAndClose({ focusSelect: true, fromEvent: event });\n        break;\n      }\n      case ESC: {\n        if (!open) {\n          return;\n        }\n        event.preventDefault();\n        closeDropdown({ focusSelect: true, fromEvent: event });\n        break;\n      }\n      case HOME: {\n        event.preventDefault();\n        if (!open) {\n          openDropdown({ fromEvent: event });\n          return;\n        }\n        activateOption(\"first\", { scroll: true });\n        break;\n      }\n      case SPACE: {\n        event.preventDefault();\n        if (open) {\n          selectActiveOptionAndClose({ focusSelect: true, fromEvent: event });\n        } else {\n          openDropdown({ fromEvent: event });\n        }\n        break;\n      }\n      case TAB: {\n        if (!open) {\n          return;\n        }\n        if (!shiftKey) {\n          event.preventDefault();\n        }\n        selectActiveOptionAndClose({\n          focusSelect: !shiftKey,\n          fromEvent: event\n        });\n        break;\n      }\n      default:\n        if (!modifierKey && code.match(/^Key/)) {\n          event.preventDefault();\n          event.stopPropagation();\n          searchFromTyping(code.replace(/^Key/, \"\"), {\n            select: !open,\n            fromEvent: event\n          });\n        }\n    }\n  }, [\n    activateOption,\n    closeDropdown,\n    open,\n    openDropdown,\n    searchFromTyping,\n    selectActiveOptionAndClose\n  ]);\n  const handleButtonKeyDown = useCallback((event) => {\n    handleKeyDown(event);\n    onKeyDown === null || onKeyDown === void 0 ? void 0 : onKeyDown(event);\n  }, [handleKeyDown, onKeyDown]);\n  const handleActivateOptionIndex = useCallback((index) => {\n    activateOption(index);\n  }, [activateOption]);\n  const handleBlur = useCallback((event) => {\n    if (open) {\n      return;\n    }\n    clearSearchFromTyping();\n    onBlur === null || onBlur === void 0 ? void 0 : onBlur(event);\n  }, [clearSearchFromTyping, onBlur, open]);\n  const handleFocus = useCallback((event) => {\n    clearSearchFromTyping();\n    onFocus === null || onFocus === void 0 ? void 0 : onFocus(event);\n  }, [clearSearchFromTyping, onFocus]);\n  const handleSetDropdownRef = useCallback((ref) => {\n    dropdownRef.current = ref;\n    if (focusIndexWhenSet.current !== void 0) {\n      focusOption(focusIndexWhenSet.current);\n    }\n  }, [focusOption]);\n  const handleSetOptionRef = useCallback((optionRef, index) => {\n    optionRefs.current[index] = optionRef;\n    if (focusIndexWhenSet.current === index) {\n      focusOption(focusIndexWhenSet.current);\n    }\n  }, [focusOption]);\n  useEffect(() => {\n    if (!open) {\n      return () => {\n      };\n    }\n    const outsideMouseDown = (event) => {\n      var _a;\n      const target = event.target;\n      if (!((_a = wrapperRef.current) === null || _a === void 0 ? void 0 : _a.contains(target))) {\n        event.preventDefault();\n        closeDropdown({ focusSelect: false, fromEvent: event });\n      }\n    };\n    document.addEventListener(\"mousedown\", outsideMouseDown);\n    return () => {\n      document.removeEventListener(\"mousedown\", outsideMouseDown);\n    };\n  }, [closeDropdown, open, wrapperRef]);\n  return useMemo(() => ({\n    activeOption,\n    handleActivateOptionIndex,\n    handleBlur,\n    handleButtonKeyDown,\n    handleDropdownKeyDown: handleKeyDown,\n    handleFocus,\n    handleMouseDown,\n    handleOptionClick,\n    handleSetDropdownRef,\n    handleSetOptionRef,\n    open,\n    selectedOption\n  }), [\n    activeOption,\n    handleActivateOptionIndex,\n    handleBlur,\n    handleButtonKeyDown,\n    handleFocus,\n    handleKeyDown,\n    handleMouseDown,\n    handleOptionClick,\n    handleSetDropdownRef,\n    handleSetOptionRef,\n    open,\n    selectedOption\n  ]);\n};\n\nexport { useSelectState };\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AACzE,SAASC,kBAAkB,QAAQ,yBAAyB;AAC5D,OAAOC,2BAA2B,MAAM,iDAAiD;AACzF,SAASC,KAAK,QAAQ,2BAA2B;AAEjD,MAAMC,kBAAkB,GAAG,GAAG;AAC9B,MAAMC,cAAc,GAAGA,CAAC;EAAEC,MAAM;EAAEC,QAAQ;EAAEC,OAAO;EAAEC,OAAO;EAAEC,SAAS;EAAEC,WAAW;EAAEC,MAAM;EAAEC,IAAI,EAAEC,QAAQ;EAAEC,OAAO;EAAEC,QAAQ;EAAEC,KAAK;EAAEC,SAAS;EAAEC,QAAQ;EAAEC;AAAW,CAAC,KAAK;EAC5K,MAAMC,WAAW,GAAGzB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAM0B,UAAU,GAAG1B,MAAM,CAAC,EAAE,CAAC;EAC7B,MAAM2B,aAAa,GAAG3B,MAAM,CAAC,CAAC,CAAC;EAC/B,MAAM4B,WAAW,GAAG5B,MAAM,CAAC,CAAC,CAAC;EAC7B,MAAM6B,iBAAiB,GAAG7B,MAAM,CAAC,CAAC;EAClC,MAAM8B,UAAU,GAAG9B,MAAM,CAAC,QAAQ,CAAC;EACnC,MAAM+B,WAAW,GAAG/B,MAAM,CAAC,EAAE,CAAC;EAC9B,MAAMgC,WAAW,GAAGhC,MAAM,CAAC,CAAC;EAC5B,MAAM,CAACiB,IAAI,EAAEgB,OAAO,CAAC,GAAG3B,2BAA2B,CAAC;IAClD4B,YAAY,EAAE,KAAK;IACnBvB,QAAQ,EAAEK,MAAM;IAChBmB,gBAAgB,EAAE,QAAQ;IAC1Bf,QAAQ;IACRC,KAAK,EAAEH,QAAQ;IACfkB,aAAa,EAAE;EACjB,CAAC,CAAC;EACF,MAAMC,cAAc,GAAGpC,OAAO,CAAC,MAAM;IACnC,MAAMqC,KAAK,GAAGnB,OAAO,CAACoB,SAAS,CAAEC,MAAM,IAAKA,MAAM,CAACnB,KAAK,KAAKA,KAAK,CAAC;IACnEM,aAAa,CAACc,OAAO,GAAGlC,KAAK,CAAC+B,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC;IAC7C,OAAOnB,OAAO,CAACmB,KAAK,CAAC;EACvB,CAAC,EAAE,CAACnB,OAAO,EAAEE,KAAK,CAAC,CAAC;EACpB,MAAM,CAACqB,YAAY,EAAEC,eAAe,CAAC,GAAGzC,QAAQ,CAACiB,OAAO,CAAC,CAAC,CAAC,CAAC;EAC5D,MAAMyB,WAAW,GAAGzC,WAAW,CAAEmC,KAAK,IAAK;IACzC,MAAMO,UAAU,GAAGpB,WAAW,CAACgB,OAAO;IACtC,MAAMK,QAAQ,GAAGpB,UAAU,CAACe,OAAO,CAACH,KAAK,CAAC;IAC1C,IAAI,CAACQ,QAAQ,IAAI,CAACD,UAAU,EAAE;MAC5BhB,iBAAiB,CAACY,OAAO,GAAGH,KAAK;MACjC;IACF;IACAT,iBAAiB,CAACY,OAAO,GAAG,KAAK,CAAC;IAClC,MAAMM,cAAc,GAAGF,UAAU,CAACG,YAAY;IAC9C,MAAMC,iBAAiB,GAAGJ,UAAU,CAACK,SAAS;IAC9C,MAAMC,iBAAiB,GAAGN,UAAU,CAACK,SAAS,GAAGH,cAAc;IAC/D,MAAMK,SAAS,GAAGN,QAAQ,CAACO,SAAS;IACpC,MAAMC,YAAY,GAAGR,QAAQ,CAACS,YAAY;IAC1C,MAAMC,YAAY,GAAGV,QAAQ,CAACO,SAAS,GAAGP,QAAQ,CAACS,YAAY;IAC/D,IAAIH,SAAS,GAAGH,iBAAiB,EAAE;MACjCJ,UAAU,CAACY,QAAQ,CAAC,CAAC,EAAEL,SAAS,CAAC;IACnC;IACA,IAAII,YAAY,GAAGL,iBAAiB,EAAE;MACpCN,UAAU,CAACY,QAAQ,CAAC,CAAC,EAAEL,SAAS,GAAGL,cAAc,GAAGO,YAAY,CAAC;IACnE;IACAR,QAAQ,CAACY,KAAK,CAAC;MAAEC,aAAa,EAAE;IAAK,CAAC,CAAC;EACzC,CAAC,EAAE,CAAClC,WAAW,CAAC,CAAC;EACjB,MAAMmC,cAAc,GAAGzD,WAAW,CAAC,CAAC0D,aAAa,EAAE;IAAEC;EAAO,CAAC,GAAG,CAAC,CAAC,KAAK;IACrE,IAAIC,EAAE;IACN,MAAMC,SAAS,GAAG7C,OAAO,CAAC8C,MAAM,GAAG,CAAC;IACpC,IAAI3B,KAAK;IACT,QAAQuB,aAAa;MACnB,KAAK,OAAO;QAAE;UACZvB,KAAK,GAAG,CAAC;UACT;QACF;MACA,KAAK,MAAM;QAAE;UACXA,KAAK,GAAG0B,SAAS;UACjB;QACF;MACA,KAAK,MAAM;QAAE;UACX1B,KAAK,GAAG/B,KAAK,CAACqB,WAAW,CAACa,OAAO,GAAG,CAAC,EAAE,CAAC,EAAEuB,SAAS,CAAC;UACpD;QACF;MACA,KAAK,UAAU;QAAE;UACf1B,KAAK,GAAG/B,KAAK,CAACqB,WAAW,CAACa,OAAO,GAAG,CAAC,EAAE,CAAC,EAAEuB,SAAS,CAAC;UACpD;QACF;MACA,KAAK,UAAU;QAAE;UACf1B,KAAK,GAAG/B,KAAK,CAAC,CAACwD,EAAE,GAAGpC,aAAa,CAACc,OAAO,MAAM,IAAI,IAAIsB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,EAAE,CAAC,EAAEC,SAAS,CAAC;UAC5F;QACF;MACA;QACE1B,KAAK,GAAGuB,aAAa;IACzB;IACAjC,WAAW,CAACa,OAAO,GAAGH,KAAK;IAC3BK,eAAe,CAACxB,OAAO,CAACmB,KAAK,CAAC,CAAC;IAC/B,IAAIwB,MAAM,EAAE;MACVlB,WAAW,CAACN,KAAK,CAAC;IACpB;EACF,CAAC,EAAE,CAACV,WAAW,EAAET,OAAO,EAAEyB,WAAW,CAAC,CAAC;EACvC,MAAMsB,YAAY,GAAG/D,WAAW,CAAC,CAAC;IAAEgE;EAAU,CAAC,KAAK;IAClDlC,OAAO,CAAC,IAAI,CAAC;IACb2B,cAAc,CAAC,UAAU,EAAE;MAAEE,MAAM,EAAE;IAAK,CAAC,CAAC;IAC5C9C,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAAC;MAAEmD;IAAU,CAAC,CAAC;EACvE,CAAC,EAAE,CAACP,cAAc,EAAE5C,MAAM,EAAEiB,OAAO,CAAC,CAAC;EACrC,MAAMmC,qBAAqB,GAAGjE,WAAW,CAAC,MAAM;IAC9C2B,UAAU,CAACW,OAAO,GAAG,QAAQ;IAC7BV,WAAW,CAACU,OAAO,GAAG,EAAE;IACxB4B,YAAY,CAACrC,WAAW,CAACS,OAAO,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EACN,MAAM6B,aAAa,GAAGnE,WAAW,CAAC,CAAC;IAAEoE,WAAW;IAAEJ;EAAU,CAAC,KAAK;IAChE,IAAIJ,EAAE;IACNnD,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC;MAAEuD;IAAU,CAAC,CAAC;IACxElC,OAAO,CAAC,KAAK,CAAC;IACdU,eAAe,CAACxB,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3BiD,qBAAqB,CAAC,CAAC;IACvBvC,iBAAiB,CAACY,OAAO,GAAG,KAAK,CAAC;IAClC,IAAI8B,WAAW,EAAE;MACf,CAACR,EAAE,GAAGzC,SAAS,CAACmB,OAAO,MAAM,IAAI,IAAIsB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACL,KAAK,CAAC,CAAC;IAC1E;EACF,CAAC,EAAE,CAACU,qBAAqB,EAAExD,OAAO,EAAEO,OAAO,EAAEG,SAAS,EAAEW,OAAO,CAAC,CAAC;EACjE,MAAMuC,cAAc,GAAGrE,WAAW,CAAC,CAAC;IAAEgE;EAAU,CAAC,KAAK;IACpD,IAAIlD,IAAI,EAAE;MACRqD,aAAa,CAAC;QAAEC,WAAW,EAAE,KAAK;QAAEJ;MAAU,CAAC,CAAC;IAClD,CAAC,MAAM;MACLD,YAAY,CAAC;QAAEC;MAAU,CAAC,CAAC;IAC7B;EACF,CAAC,EAAE,CAACG,aAAa,EAAEJ,YAAY,EAAEjD,IAAI,CAAC,CAAC;EACvC,MAAMwD,iBAAiB,GAAGtE,WAAW,CAAC,CAACuE,WAAW,EAAE;IAAEP;EAAU,CAAC,KAAK;IACpE,IAAIxC,aAAa,CAACc,OAAO,KAAKiC,WAAW,EAAE;MACzC;IACF;IACA/C,aAAa,CAACc,OAAO,GAAGiC,WAAW;IACnCnD,QAAQ,CAACJ,OAAO,CAACuD,WAAW,CAAC,CAACrD,KAAK,CAAC;IACpCV,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACQ,OAAO,CAACuD,WAAW,CAAC,EAAE;MAAEP;IAAU,CAAC,CAAC;EACnG,CAAC,EAAE,CAACxD,QAAQ,EAAEQ,OAAO,EAAEI,QAAQ,CAAC,CAAC;EACjC,MAAMoD,0BAA0B,GAAGxE,WAAW,CAAC,CAAC;IAAEoE,WAAW;IAAEJ;EAAU,CAAC,KAAK;IAC7EM,iBAAiB,CAAC7C,WAAW,CAACa,OAAO,EAAE;MAAE0B;IAAU,CAAC,CAAC;IACrDG,aAAa,CAAC;MAAEC,WAAW;MAAEJ;IAAU,CAAC,CAAC;EAC3C,CAAC,EAAE,CAACG,aAAa,EAAEG,iBAAiB,CAAC,CAAC;EACtC,MAAMG,gBAAgB,GAAGzE,WAAW,CAAC,CAAC0E,MAAM,EAAE;IAAEV,SAAS;IAAEW;EAAO,CAAC,KAAK;IACtE,IAAIf,EAAE;IACN,IAAIjC,UAAU,CAACW,OAAO,KAAK,kBAAkB,IAAIoC,MAAM,KAAK9C,WAAW,CAACU,OAAO,EAAE;MAC/EX,UAAU,CAACW,OAAO,GAAG,QAAQ;IAC/B;IACA,IAAIoC,MAAM,KAAK9C,WAAW,CAACU,OAAO,EAAE;MAClCX,UAAU,CAACW,OAAO,GAAG,kBAAkB;IACzC,CAAC,MAAM;MACLV,WAAW,CAACU,OAAO,IAAIoC,MAAM;IAC/B;IACA,QAAQ/C,UAAU,CAACW,OAAO;MACxB,KAAK,QAAQ;QAAE;UACb,IAAIsC,gBAAgB,GAAG5D,OAAO,CAACoB,SAAS,CAAEC,MAAM,IAAK;YACnD,IAAIwC,GAAG;YACP,OAAO,CAAC,CAACA,GAAG,GAAGxC,MAAM,CAACyC,KAAK,MAAM,IAAI,IAAID,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACE,iBAAiB,CAAC,CAAC,CAACC,OAAO,CAACpD,WAAW,CAACU,OAAO,CAAC,MAAM,CAAC;UAChI,CAAC,CAAC;UACF,IAAIsC,gBAAgB,GAAG,CAAC,EAAE;YACxBA,gBAAgB,GAAG5D,OAAO,CAACoB,SAAS,CAAEC,MAAM,IAAK;cAC/C,IAAIwC,GAAG;cACP,OAAO,CAAC,CAACA,GAAG,GAAGxC,MAAM,CAACyC,KAAK,MAAM,IAAI,IAAID,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACE,iBAAiB,CAAC,CAAC,CAACC,OAAO,CAACN,MAAM,CAAC,MAAM,CAAC;YACnH,CAAC,CAAC;YACF9C,WAAW,CAACU,OAAO,GAAGoC,MAAM;UAC9B;UACA,IAAIE,gBAAgB,IAAI,CAAC,EAAE;YACzB,IAAID,MAAM,EAAE;cACVL,iBAAiB,CAACM,gBAAgB,EAAE;gBAAEZ;cAAU,CAAC,CAAC;YACpD,CAAC,MAAM;cACLP,cAAc,CAACmB,gBAAgB,EAAE;gBAAEjB,MAAM,EAAE;cAAK,CAAC,CAAC;YACpD;UACF;UACA;QACF;MACA,KAAK,kBAAkB;QAAE;UACvB,MAAMsB,kBAAkB,GAAGN,MAAM,GAAG,CAACf,EAAE,GAAGpC,aAAa,CAACc,OAAO,MAAM,IAAI,IAAIsB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,CAAC,GAAGnC,WAAW,CAACa,OAAO;UAC1H,IAAIsC,gBAAgB,GAAG5D,OAAO,CAACoB,SAAS,CAAC,CAACC,MAAM,EAAEF,KAAK,KAAK;YAC1D,IAAI0C,GAAG;YACP,OAAO1C,KAAK,GAAG8C,kBAAkB,IAAI,CAAC,CAACJ,GAAG,GAAGxC,MAAM,CAACyC,KAAK,MAAM,IAAI,IAAID,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACE,iBAAiB,CAAC,CAAC,CAACC,OAAO,CAACN,MAAM,CAAC,MAAM,CAAC;UACjJ,CAAC,CAAC;UACF,IAAIE,gBAAgB,GAAG,CAAC,EAAE;YACxBA,gBAAgB,GAAG5D,OAAO,CAACoB,SAAS,CAAEC,MAAM,IAAK;cAC/C,IAAIwC,GAAG;cACP,OAAO,CAAC,CAACA,GAAG,GAAGxC,MAAM,CAACyC,KAAK,MAAM,IAAI,IAAID,GAAG,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,GAAG,CAACE,iBAAiB,CAAC,CAAC,CAACC,OAAO,CAACN,MAAM,CAAC,MAAM,CAAC;YACnH,CAAC,CAAC;UACJ;UACA,IAAIE,gBAAgB,IAAI,CAAC,EAAE;YACzB,IAAID,MAAM,EAAE;cACVL,iBAAiB,CAACM,gBAAgB,EAAE;gBAAEZ;cAAU,CAAC,CAAC;YACpD,CAAC,MAAM;cACLP,cAAc,CAACmB,gBAAgB,EAAE;gBAAEjB,MAAM,EAAE;cAAK,CAAC,CAAC;YACpD;UACF;UACA;QACF;IACF;IACAO,YAAY,CAACrC,WAAW,CAACS,OAAO,CAAC;IACjCT,WAAW,CAACS,OAAO,GAAG4C,UAAU,CAAC,MAAM;MACrC,IAAIvD,UAAU,CAACW,OAAO,KAAK,QAAQ,EAAE;QACnCV,WAAW,CAACU,OAAO,GAAG,EAAE;MAC1B;IACF,CAAC,EAAEjC,kBAAkB,CAAC;EACxB,CAAC,EAAE,CAACoD,cAAc,EAAEzC,OAAO,EAAEsD,iBAAiB,CAAC,CAAC;EAChD,MAAMa,eAAe,GAAGnF,WAAW,CAAEoF,KAAK,IAAK;IAC7C,IAAIxB,EAAE;IACN,IAAIwB,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MACtB;IACF;IACAD,KAAK,CAACE,cAAc,CAAC,CAAC;IACtB,CAAC1B,EAAE,GAAGzC,SAAS,CAACmB,OAAO,MAAM,IAAI,IAAIsB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACL,KAAK,CAAC,CAAC;IACxEc,cAAc,CAAC;MAAEL,SAAS,EAAEoB;IAAM,CAAC,CAAC;IACpCxE,WAAW,KAAK,IAAI,IAAIA,WAAW,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,WAAW,CAACwE,KAAK,CAAC;EAC9E,CAAC,EAAE,CAACxE,WAAW,EAAEO,SAAS,EAAEkD,cAAc,CAAC,CAAC;EAC5C,MAAMkB,iBAAiB,GAAGvF,WAAW,CAAEoF,KAAK,IAAK;IAC/CZ,0BAA0B,CAAC;MAAEJ,WAAW,EAAE,IAAI;MAAEJ,SAAS,EAAEoB;IAAM,CAAC,CAAC;EACrE,CAAC,EAAE,CAACZ,0BAA0B,CAAC,CAAC;EAChC,MAAMgB,aAAa,GAAGxF,WAAW,CAAEoF,KAAK,IAAK;IAC3C,MAAM;MAAEK,MAAM;MAAEC,IAAI;MAAEC,OAAO;MAAEC,OAAO;MAAEC;IAAS,CAAC,GAAGT,KAAK;IAC1D,MAAM;MAAEU,UAAU;MAAEC,QAAQ;MAAEC,GAAG;MAAEC,KAAK;MAAEC,GAAG;MAAEC,IAAI;MAAEC,KAAK;MAAEC;IAAI,CAAC,GAAGnG,kBAAkB;IACtF,MAAMoG,WAAW,GAAGb,MAAM,IAAIE,OAAO,IAAIC,OAAO,IAAIC,QAAQ;IAC5D,MAAMU,mBAAmB,GAAGd,MAAM,IAAIE,OAAO,IAAIC,OAAO;IACxD,IAAIF,IAAI,KAAKW,GAAG,IAAIE,mBAAmB,IAAIb,IAAI,KAAKW,GAAG,IAAIC,WAAW,EAAE;MACtE;IACF;IACA,QAAQZ,IAAI;MACV,KAAKI,UAAU;QAAE;UACfV,KAAK,CAACE,cAAc,CAAC,CAAC;UACtB,IAAI,CAACxE,IAAI,EAAE;YACTiD,YAAY,CAAC;cAAEC,SAAS,EAAEoB;YAAM,CAAC,CAAC;YAClC;UACF;UACA3B,cAAc,CAAC,MAAM,EAAE;YAAEE,MAAM,EAAE;UAAK,CAAC,CAAC;UACxC;QACF;MACA,KAAKoC,QAAQ;QAAE;UACbX,KAAK,CAACE,cAAc,CAAC,CAAC;UACtB,IAAI,CAACxE,IAAI,EAAE;YACTiD,YAAY,CAAC;cAAEC,SAAS,EAAEoB;YAAM,CAAC,CAAC;YAClC;UACF;UACA3B,cAAc,CAAC,UAAU,EAAE;YAAEE,MAAM,EAAE;UAAK,CAAC,CAAC;UAC5C;QACF;MACA,KAAKqC,GAAG;QAAE;UACRZ,KAAK,CAACE,cAAc,CAAC,CAAC;UACtB,IAAI,CAACxE,IAAI,EAAE;YACTiD,YAAY,CAAC;cAAEC,SAAS,EAAEoB;YAAM,CAAC,CAAC;YAClC;UACF;UACA3B,cAAc,CAAC,MAAM,EAAE;YAAEE,MAAM,EAAE;UAAK,CAAC,CAAC;UACxC;QACF;MACA,KAAKsC,KAAK;QAAE;UACV,IAAI,CAACnF,IAAI,EAAE;YACT;UACF;UACAsE,KAAK,CAACE,cAAc,CAAC,CAAC;UACtBd,0BAA0B,CAAC;YAAEJ,WAAW,EAAE,IAAI;YAAEJ,SAAS,EAAEoB;UAAM,CAAC,CAAC;UACnE;QACF;MACA,KAAKc,GAAG;QAAE;UACR,IAAI,CAACpF,IAAI,EAAE;YACT;UACF;UACAsE,KAAK,CAACE,cAAc,CAAC,CAAC;UACtBnB,aAAa,CAAC;YAAEC,WAAW,EAAE,IAAI;YAAEJ,SAAS,EAAEoB;UAAM,CAAC,CAAC;UACtD;QACF;MACA,KAAKe,IAAI;QAAE;UACTf,KAAK,CAACE,cAAc,CAAC,CAAC;UACtB,IAAI,CAACxE,IAAI,EAAE;YACTiD,YAAY,CAAC;cAAEC,SAAS,EAAEoB;YAAM,CAAC,CAAC;YAClC;UACF;UACA3B,cAAc,CAAC,OAAO,EAAE;YAAEE,MAAM,EAAE;UAAK,CAAC,CAAC;UACzC;QACF;MACA,KAAKyC,KAAK;QAAE;UACVhB,KAAK,CAACE,cAAc,CAAC,CAAC;UACtB,IAAIxE,IAAI,EAAE;YACR0D,0BAA0B,CAAC;cAAEJ,WAAW,EAAE,IAAI;cAAEJ,SAAS,EAAEoB;YAAM,CAAC,CAAC;UACrE,CAAC,MAAM;YACLrB,YAAY,CAAC;cAAEC,SAAS,EAAEoB;YAAM,CAAC,CAAC;UACpC;UACA;QACF;MACA,KAAKiB,GAAG;QAAE;UACR,IAAI,CAACvF,IAAI,EAAE;YACT;UACF;UACA,IAAI,CAAC+E,QAAQ,EAAE;YACbT,KAAK,CAACE,cAAc,CAAC,CAAC;UACxB;UACAd,0BAA0B,CAAC;YACzBJ,WAAW,EAAE,CAACyB,QAAQ;YACtB7B,SAAS,EAAEoB;UACb,CAAC,CAAC;UACF;QACF;MACA;QACE,IAAI,CAACkB,WAAW,IAAIZ,IAAI,CAACc,KAAK,CAAC,MAAM,CAAC,EAAE;UACtCpB,KAAK,CAACE,cAAc,CAAC,CAAC;UACtBF,KAAK,CAACqB,eAAe,CAAC,CAAC;UACvBhC,gBAAgB,CAACiB,IAAI,CAACgB,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACzC/B,MAAM,EAAE,CAAC7D,IAAI;YACbkD,SAAS,EAAEoB;UACb,CAAC,CAAC;QACJ;IACJ;EACF,CAAC,EAAE,CACD3B,cAAc,EACdU,aAAa,EACbrD,IAAI,EACJiD,YAAY,EACZU,gBAAgB,EAChBD,0BAA0B,CAC3B,CAAC;EACF,MAAMmC,mBAAmB,GAAG3G,WAAW,CAAEoF,KAAK,IAAK;IACjDI,aAAa,CAACJ,KAAK,CAAC;IACpBzE,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACyE,KAAK,CAAC;EACxE,CAAC,EAAE,CAACI,aAAa,EAAE7E,SAAS,CAAC,CAAC;EAC9B,MAAMiG,yBAAyB,GAAG5G,WAAW,CAAEmC,KAAK,IAAK;IACvDsB,cAAc,CAACtB,KAAK,CAAC;EACvB,CAAC,EAAE,CAACsB,cAAc,CAAC,CAAC;EACpB,MAAMoD,UAAU,GAAG7G,WAAW,CAAEoF,KAAK,IAAK;IACxC,IAAItE,IAAI,EAAE;MACR;IACF;IACAmD,qBAAqB,CAAC,CAAC;IACvB1D,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAAC6E,KAAK,CAAC;EAC/D,CAAC,EAAE,CAACnB,qBAAqB,EAAE1D,MAAM,EAAEO,IAAI,CAAC,CAAC;EACzC,MAAMgG,WAAW,GAAG9G,WAAW,CAAEoF,KAAK,IAAK;IACzCnB,qBAAqB,CAAC,CAAC;IACvBvD,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC0E,KAAK,CAAC;EAClE,CAAC,EAAE,CAACnB,qBAAqB,EAAEvD,OAAO,CAAC,CAAC;EACpC,MAAMqG,oBAAoB,GAAG/G,WAAW,CAAEgH,GAAG,IAAK;IAChD1F,WAAW,CAACgB,OAAO,GAAG0E,GAAG;IACzB,IAAItF,iBAAiB,CAACY,OAAO,KAAK,KAAK,CAAC,EAAE;MACxCG,WAAW,CAACf,iBAAiB,CAACY,OAAO,CAAC;IACxC;EACF,CAAC,EAAE,CAACG,WAAW,CAAC,CAAC;EACjB,MAAMwE,kBAAkB,GAAGjH,WAAW,CAAC,CAACkH,SAAS,EAAE/E,KAAK,KAAK;IAC3DZ,UAAU,CAACe,OAAO,CAACH,KAAK,CAAC,GAAG+E,SAAS;IACrC,IAAIxF,iBAAiB,CAACY,OAAO,KAAKH,KAAK,EAAE;MACvCM,WAAW,CAACf,iBAAiB,CAACY,OAAO,CAAC;IACxC;EACF,CAAC,EAAE,CAACG,WAAW,CAAC,CAAC;EACjBxC,SAAS,CAAC,MAAM;IACd,IAAI,CAACa,IAAI,EAAE;MACT,OAAO,MAAM,CACb,CAAC;IACH;IACA,MAAMqG,gBAAgB,GAAI/B,KAAK,IAAK;MAClC,IAAIxB,EAAE;MACN,MAAMwD,MAAM,GAAGhC,KAAK,CAACgC,MAAM;MAC3B,IAAI,EAAE,CAACxD,EAAE,GAAGvC,UAAU,CAACiB,OAAO,MAAM,IAAI,IAAIsB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACyD,QAAQ,CAACD,MAAM,CAAC,CAAC,EAAE;QACzFhC,KAAK,CAACE,cAAc,CAAC,CAAC;QACtBnB,aAAa,CAAC;UAAEC,WAAW,EAAE,KAAK;UAAEJ,SAAS,EAAEoB;QAAM,CAAC,CAAC;MACzD;IACF,CAAC;IACDkC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEJ,gBAAgB,CAAC;IACxD,OAAO,MAAM;MACXG,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEL,gBAAgB,CAAC;IAC7D,CAAC;EACH,CAAC,EAAE,CAAChD,aAAa,EAAErD,IAAI,EAAEO,UAAU,CAAC,CAAC;EACrC,OAAOvB,OAAO,CAAC,OAAO;IACpByC,YAAY;IACZqE,yBAAyB;IACzBC,UAAU;IACVF,mBAAmB;IACnBc,qBAAqB,EAAEjC,aAAa;IACpCsB,WAAW;IACX3B,eAAe;IACfI,iBAAiB;IACjBwB,oBAAoB;IACpBE,kBAAkB;IAClBnG,IAAI;IACJoB;EACF,CAAC,CAAC,EAAE,CACFK,YAAY,EACZqE,yBAAyB,EACzBC,UAAU,EACVF,mBAAmB,EACnBG,WAAW,EACXtB,aAAa,EACbL,eAAe,EACfI,iBAAiB,EACjBwB,oBAAoB,EACpBE,kBAAkB,EAClBnG,IAAI,EACJoB,cAAc,CACf,CAAC;AACJ,CAAC;AAED,SAAS5B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}